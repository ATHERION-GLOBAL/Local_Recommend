<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loca | Add a Local Favourite</title>
  <link rel="stylesheet" href="css/style.css" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7SG0DYD3YG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7SG0DYD3YG');
  </script>
</head>

<body>

<header>
  <div class="header-inner">
    <img src="img/loca.jpeg" alt="Loca Logo" class="loca-logo" />
    <p>Love a business? Share it and get it Loca Listed for all to discover.</p>
  </div>
</header>

<!-- Top Ad -->
<section class="ad-slot ad-top">
  <div class="ad-slot-inner">
    <!-- Replace content below with your image/video/embed -->
    <a href="https://www.google.com/" class="ad-link">
      <img src="img/partner-banner.jpg" alt="Partner promotion" loading="lazy" />
    </a>
  </div>
</section>

<main>

  <section class="card">
    <h2 class="card-title">Add a Local Favourite</h2>

    <form id="business-form">

      <!-- Hidden analytics fields -->
      <input type="hidden" name="source" id="source-field" />
      <input type="hidden" name="campaign" id="campaign-field" value="prelaunch_nov2025" />

      <!-- BUSINESS INFO -->
      <div class="form-section">
        <h3>Business details</h3>

        <label>Business name <span class="required">*</span>
          <input type="text" name="business-name" required />
        </label>

        <label>Category
          <select id="category" name="category">
            <option value="">Select a category...</option>
            <option>Restaurant / Café</option>
            <option>Gym / Fitness</option>
            <option>Beauty / Spa</option>
            <option>Retail / Shop</option>
            <option>Professional services</option>
            <option value="Other">Other</option>
          </select>
        </label>

        <div id="other-category" class="hidden">
          <label>Specify category
            <input type="text" name="custom-category" id="custom-category" />
          </label>
        </div>

        <div id="category-banner" class="category-banner category-default">
          <span id="category-phrase">Pick a category to set the Loca vibe ✨</span>
        </div>

        <label>Location / Suburb
          <input type="text" name="location-suburb" />
        </label>

        <label>City / Region
          <input type="text" name="city-region" />
        </label>

        <label>Website or main link (optional)
          <input type="url" name="main-link" />
        </label>

        <label>Google Maps link (optional)
          <input type="url" name="maps-link" />
        </label>
      </div>

      <!-- WHY RECOMMEND -->
      <div class="form-section">
        <h3>Why do you recommend this place?</h3>

        <label>What makes this business great?
          <textarea name="reason" rows="4"></textarea>
        </label>

        <label>How strongly do you recommend it?
          <select name="strength">
            <option value="">Select...</option>
            <option>It’s good</option>
            <option>Really like it</option>
            <option>One of my favourites</option>
            <option>Absolute must-visit</option>
          </select>
        </label>

        <label>What is it best for?
          <input type="text" name="best-for" />
        </label>

        <label>How did you discover this place?
          <select name="discovery">
            <option value="">Select...</option>
            <option>I live nearby</option>
            <option>Friend or family recommendation</option>
            <option>Social media</option>
            <option>Online search</option>
            <option>Just walked past</option>
            <option>Other</option>
          </select>
        </label>
      </div>

      <!-- Middle Ad -->
      <section class="ad-slot ad-middle">
        <div class="ad-slot-inner">
          <!-- Replace with featured Loca spotlight, video, or promo -->
          <a href="https://www.google.com/" class="ad-link">
            <img src="img/partner-banner.jpg" alt="Partner promotion" loading="lazy" />
          </a>
        </div>
      </section>

      <!-- USER INFO -->
      <div class="form-section">
        <h3>About you</h3>

        <label>Your name
          <input type="text" name="user-name" />
        </label>

        <label>Email
          <input type="email" name="email" />
        </label>

        <label>Mobile number
          <input type="tel" name="mobile" />
        </label>

        <fieldset class="radio-group">
          <legend>Your relationship to this business</legend>
          <label><input type="radio" name="relationship" value="Customer" /> Customer</label>
          <label><input type="radio" name="relationship" value="Owner" /> Owner</label>
          <label><input type="radio" name="relationship" value="Staff" /> Staff</label>
          <label><input type="radio" name="relationship" value="Other" /> Other</label>
        </fieldset>
      </div>

      <!-- CONSENT -->
      <div class="form-section">
        <h3>Consent</h3>
        <label class="checkbox-row">
          <input type="checkbox" name="public-consent" />
          <span>By submitting, you confirm the information is accurate to the best of your knowledge.</span>
        </label>

        <label class="checkbox-row">
          <input type="checkbox" name="contact-consent" />
          <span>You may contact me for follow-up questions.</span>
        </label>
      </div>

      <!-- ACTIONS -->
      <div class="form-actions">
        <button type="submit" id="submit-btn">Get it Loca Listed</button>
        <p class="helper-text" id="status-text"></p>
      </div>

    </form>
  </section>

  <!-- Bottom Ads -->
  <section class="ad-bottom-grid">
    <div class="ad-slot"><div class="ad-slot-inner"><a href="https://www.google.com/" class="ad-link">
      <img src="img/partner-banner.jpg" alt="Partner promotion" loading="lazy" />
    </a></div></div>
    <div class="ad-slot"><div class="ad-slot-inner"><a href="https://www.google.com/" class="ad-link">
      <img src="img/partner-banner.jpg" alt="Partner promotion" loading="lazy" />
    </a></div></div>
  </section>

</main>

<footer>
  <p>© 2025 Loca · All rights reserved</p>
</footer>

<script>
  const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxRUn_6zARdmJieAUiItrq68he4W8Tc0C9FOyxDCB7gq-sm7riJx-XjaSFUVJRU2r9ZSg/exec';
  const ACCESS_KEY = 'LocalRec_2025';

  const form = document.getElementById("business-form");
  const submitBtn = document.getElementById("submit-btn");
  const statusText = document.getElementById("status-text");
  const categorySelect = document.getElementById("category");
  const otherCategoryDiv = document.getElementById("other-category");
  const customCategoryInput = document.getElementById("custom-category");
  const categoryPhrase = document.getElementById("category-phrase");
  const categoryBanner = document.getElementById("category-banner");

  // Category UI updates (unchanged)
  const categoryConfig = {
    "Restaurant / Café": { phrase: "Eat local, live Loca.", className: "category-restaurant" },
    "Gym / Fitness": { phrase: "Train local, feel Loca.", className: "category-gym" },
    "Beauty / Spa": { phrase: "Glow local, glow Loca.", className: "category-beauty" },
    "Retail / Shop": { phrase: "Shop local, shop Loca.", className: "category-retail" },
    "Professional services": { phrase: "Trusted locals, powered by Loca.", className: "category-professional" },
    "Other": { phrase: "If it’s local, it’s Loca.", className: "category-other" }
  };

  function updateCategoryState() {
    const value = categorySelect.value;

    if (value === "Other") {
      otherCategoryDiv.classList.remove("hidden");
      customCategoryInput.required = false; // no required
    } else {
      otherCategoryDiv.classList.add("hidden");
      customCategoryInput.value = "";
    }

    categoryBanner.className = "category-banner category-default";
    if (categoryConfig[value]) {
      categoryBanner.classList.remove("category-default");
      categoryBanner.classList.add(categoryConfig[value].className);
      categoryPhrase.textContent = categoryConfig[value].phrase;
    } else {
      categoryPhrase.textContent = "Pick a category to set the Loca vibe ✨";
    }
  }

  categorySelect.addEventListener("change", updateCategoryState);
  updateCategoryState();

  // Submit handler with NO VALIDATION except business name
  form.addEventListener("submit", function (e) {
    e.preventDefault();

    submitBtn.disabled = true;
    submitBtn.textContent = "Sending...";

    const formData = new FormData(form);
    formData.append("key", ACCESS_KEY);

    fetch(SCRIPT_URL, { method: "POST", body: formData })
      .then(r => r.text())
      .then(() => window.location.href = "thank-you.html")
      .catch(err => {
        console.error("Error submitting form", err);
        submitBtn.disabled = false;
        submitBtn.textContent = "Get it Loca Listed";
        statusText.textContent = "Something went wrong — please try again.";
      });
  });
</script>

</body>
</html>
